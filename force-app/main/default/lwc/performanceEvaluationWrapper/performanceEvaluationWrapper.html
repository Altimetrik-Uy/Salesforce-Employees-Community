<template>
    <p if:true={spinnerOn}>
        <lightning-spinner size="medium"></lightning-spinner>
    </p>
    <lightning-card>
        <h3 slot="title">
        </h3>
        <c-evaluated-kpi review-id={recordId} is-review-open={reviewOpen}></c-evaluated-kpi>
        <c-review-plan-items review-id={recordId} is-review-open={reviewOpen}></c-review-plan-items>
        <c-review-comments id-review={recordId} open={reviewOpen} onneedupdate={saved}></c-review-comments>
        <div slot="footer">
            <lightning-button-group>
                <template if:true={reviewOpen}>
                    <lightning-button label="Back" onclick={handleClick} ></lightning-button>
                    <lightning-button label="Save" onclick={saveComments}></lightning-button>
                    <lightning-button variant="brand" label="Submit Review" onclick={handleSubmit}></lightning-button>
                </template>
                <template if:false={reviewOpen}>
                    <lightning-button label="Back" onclick={handleClick}></lightning-button>
                </template>
                <lightning-button label="Create New Plan Item" onclick={openReviewComments}></lightning-button>
            </lightning-button-group>
        </div>
        <c-plan-items-Modal id-review={recordId} is-open-review={reviewOpen} ></c-plan-items-Modal>       
    </lightning-card>
</template>