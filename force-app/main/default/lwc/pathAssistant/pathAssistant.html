<template>
    <lightning-card>
    <!-- error alert  -->
    <div if:true={errorMsg}
       class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error main"
       role="alert">
       <span class="slds-assistive-text">error</span>
       <span class="slds-icon_container slds-icon-utility-error slds-m-right_x-small"
          title="Description of icon when needed">
          <lightning-icon icon-name="utility:error" size="small"></lightning-icon>
       </span>
       <h2>
          {genericErrorMessage}
       </h2>
       <p>
          {errorMsg}
       </p>
    </div>
    <!--Error alert fin -->
    <!-- Path -->
    <article if:false={errorMsg} >
         <div class="slds-card__body slds-card__body_inner main"> 
         <!--   <div style="background-color: bisque;">-->
            <div class="test">
          <lightning-spinner variant="brand" size="small" if:true={hasToShowSpinner}></lightning-spinner>
        
            <ul if:true={isLoaded} class="slds-path__nav" role="listbox" aria-orientation="horizontal" key={organizedPath.lstWrpRoles}>
                <template for:each={organizedPath} for:item="column">
                    <div class="slds-col" key={organizedPath.lstWrpRoles} style="padding-right: 22px;"> 
                        <template for:each={column.lstWrpRoles} for:item="step">                  
                            <!--is current Role-->
                            <template if:true={step.blnCurrentRole} >
                                <li key={step.strRole} class='slds-path__item slds-is-current slds-is-active' role="presentation">
                                    <a aria-selected="false"
                                        class="slds-path__link"
                                        href="javascript:void(0);"
                                        role="option"
                                        tabindex="-1"
                                        data-value={step.strRole}
                                        onclick={handleStepSelected}
                                        onnotification={handleNotification}>
                                        <span  class="slds-path__stage" >
                                            <lightning-icon  icon-name="utility:check" size="xx-small" variant="inverse"></lightning-icon>
                                        </span>
                                        <span class="slds-path__title">{step.strRole}</span>
                                    </a>
                                </li> 
                            </template>
                            <!--is not current Role-->
                            <template if:false={step.blnCurrentRole}>
                                <!--when the role arrow goes before the current-->
                                <template if:true={step.blnIsPreRole}>
                                    <li key={step.strRole}  class='slds-path__item slds-is-won' role="presentation">
                                        <a aria-selected="false" 
                                        class="slds-path__link" 
                                        href="javascript:void(0);" 
                                        role="option"
                                        tabindex="-1" 
                                        data-value={step.strRole} 
                                        onclick={handleStepSelected}>
                                        <span class="slds-path__stage">
                                            <lightning-icon icon-name="utility:check" size="xx-small" variant="inverse" ></lightning-icon>
                                            <span class="slds-assistive-text">Current Stage:</span>
                                        </span>
                                        <span class="slds-path__title is-pre-role-text">{step.strRole}</span>
                                        </a>
                                    </li>
                                </template>
                                <!--when the role arrow goes after the current-->
                                <template if:false={step.blnIsPreRole}>
                                    <li key={step.strRole} class='slds-path__item slds-is-incomplete' role="presentation">
                                        <a aria-selected="false" 
                                        class="slds-path__link" 
                                        href="javascript:void(0);" 
                                        role="option"
                                        tabindex="-1" 
                                        data-value={step.strRole} 
                                        onclick={handleStepSelected}>
                                        <span class="slds-path__stage">
                                            <lightning-icon icon-name="utility:check" size="xx-small" variant="inverse" ></lightning-icon>
                                        </span>
                                        <span class="slds-path__title">{step.strRole}</span>
                                        </a>
                                    </li>
                                </template>
                        </template>
                    </template>
                    </div>
                </template>
            </ul>
        </div>
       </div>
    </article>
    <!-- Path -->
</lightning-card>
 </template>